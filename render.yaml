services:
  - type: web
    name: vikram-samvat-flask-app
    env: python
    region: oregon  # You can change this to your preferred region
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python app.py"
    plan: free  # Use 'starter' for a paid plan
    envVars:
      - key: PORT
        value: "5000"  # Ensure this matches the port in your Flask app

    # Add health check to ensure service is running properly
    healthCheckPath: "/"
    healthCheckTimeoutSeconds: 30

  - type: cron
    name: update-date-cron
    env: python
    schedule: "0 */12 * * *"  # Every 12 hours
    command: "/usr/local/bin/python update_date.py"  # Full path to Python executable
    plan: free
